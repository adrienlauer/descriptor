ame: testEnvironment
version: 1.2.3

components:
  lagoon-platform/aws-provider: 1.2.3

providers:
  aws:
    repository: lagoon-platform/aws-provider
    params:
      region: "eu-west-1"

nodes:
  managers:
    provider:
      name: aws
      params:
        instance_type: "t2.micro"
        ami_id: "ami-f90a4880"
        vpc_id: "vpc-880aeaef"
        security_groups:
        - name: group1
          rules:
          - proto: tcp
            ports:
            - 22
            cidr_ip: 0.0.0.0/0
            rule_desc: allow all on port 22
        - name: group2
          rules:
          - proto: tcp
            ports:
            - 80
            cidr_ip: 0.0.0.0/0
            rule_desc: allow all on port 80
    instances: 3
    labels:
      - lagoon

stacks:
  monitoring:
    repository: github.com/lagoon-platform/aws-provider
    version: 1.2.3
    deployOn:
      - lagoon
